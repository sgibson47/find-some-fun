{"ast":null,"code":"import _classCallCheck from \"/Users/samanthagibson/Development/code/find-some-fun/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/samanthagibson/Development/code/find-some-fun/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/samanthagibson/Development/code/find-some-fun/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/samanthagibson/Development/code/find-some-fun/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/samanthagibson/Development/code/find-some-fun/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/samanthagibson/Development/code/find-some-fun/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/samanthagibson/Development/code/find-some-fun/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport EventForm from './components/Form';\nimport EventsList from './containers/EventsList';\nimport Container from 'react-bootstrap/Container';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Alert from 'react-bootstrap/Alert';\nimport MyMap from './components/MyMap';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      events: [],\n      location: {\n        lat: 51.505,\n        long: -0.09\n      },\n      alert: null,\n      hasUserLocation: false,\n      venues: []\n    };\n    _this.searchEB = _this.searchEB.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addWarning = _this.addWarning.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      navigator.geolocation.getCurrentPosition(function (position) {\n        _this2.setState({\n          location: {\n            lat: position.coords.latitude,\n            long: position.coords.longitude\n          },\n          hasUserLocation: true\n        });\n      }, function () {\n        fetch('https://ipapi.co/json').then(function (response) {\n          return response.json();\n        }).then(function (location) {\n          _this2.setState({\n            location: {\n              lat: location.latitude,\n              long: location.longitude\n            },\n            hasUserLocation: true\n          });\n        });\n      });\n    }\n  }, {\n    key: \"addWarning\",\n    value: function addWarning(message) {\n      var _this3 = this;\n\n      this.setState({\n        alert: React.createElement(Alert, {\n          dismissible: true,\n          variant: \"warning\",\n          onClose: function onClose() {\n            return _this3.removeWarning();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, React.createElement(Alert.Heading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, message))\n      });\n    }\n  }, {\n    key: \"removeWarning\",\n    value: function removeWarning() {\n      this.setState({\n        alert: null\n      });\n    }\n  }, {\n    key: \"searchEB\",\n    value: function searchEB(eventKeyword, category) {\n      var _this4 = this;\n\n      var auth_token = process.env.REACT_APP_EVENTBRITE_API_KEY;\n      var keywordString = eventKeyword.split(\" \").join('+');\n      this.clearVenues();\n      fetch(\"https://www.eventbriteapi.com/v3/events/search/?q=\".concat(keywordString, \"&location.latitude=\").concat(this.state.location.lat, \"&location.longitude=\").concat(this.state.location.long, \"&categories=\").concat(category, \"&token=\").concat(auth_token)).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        console.log(data);\n\n        if (data.events.length === 0) {\n          _this4.addWarning(\"Eventbrite doesn't have any events that match your search.\");\n        } else {\n          _this4.setState({\n            events: data.events\n          });\n\n          _this4.findVenueLocations();\n        }\n      });\n    }\n  }, {\n    key: \"findVenueLocations\",\n    value: function findVenueLocations() {\n      var _this5 = this;\n\n      var auth_token = process.env.REACT_APP_EVENTBRITE_API_KEY;\n\n      if (this.state.events.length > 0) {\n        this.state.events.forEach(function (event) {\n          var venue_id = event.venue_id;\n          fetch(\"https://www.eventbriteapi.com/v3/venues/\".concat(venue_id, \"/?token=\").concat(auth_token)).then(function (response) {\n            return response.json();\n          }).then(function (data) {\n            data[\"event_id\"] = event.id;\n            data[\"event_name\"] = event.name.text;\n\n            _this5.addVenueToState(data);\n          });\n        });\n      }\n    }\n  }, {\n    key: \"addVenueToState\",\n    value: function addVenueToState(venue) {\n      this.setState(function (prevState) {\n        console.log(prevState);\n        var newVenues = prevState.venues.concat([venue]);\n        console.log(newVenues);\n        return {\n          venues: newVenues\n        };\n      });\n    }\n  }, {\n    key: \"clearVenues\",\n    value: function clearVenues() {\n      this.setState({\n        venues: []\n      });\n    }\n  }, {\n    key: \"addAppContents\",\n    value: function addAppContents() {\n      return React.createElement(React.Fragment, null, React.createElement(EventForm, {\n        searchEB: this.searchEB,\n        addWarning: this.addWarning,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), this.state.alert, React.createElement(MyMap, {\n        lat: this.state.location.lat,\n        long: this.state.location.long,\n        hasUserLocation: this.state.hasUserLocation,\n        venues: this.state.venues,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(EventsList, {\n        events: this.state.events,\n        addWarning: this.addWarning,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        bg: \"dark\",\n        variant: \"dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Navbar.Brand, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Find Some Fun\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), this.addAppContents(), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(Navbar, {\n        bg: \"dark\",\n        variant: \"dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Navbar.Brand, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"\\xA9 Sam Gibson 2019\")));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/samanthagibson/Development/code/find-some-fun/src/App.js"],"names":["React","Component","EventForm","EventsList","Container","Navbar","Alert","MyMap","App","props","state","events","location","lat","long","alert","hasUserLocation","venues","searchEB","bind","addWarning","navigator","geolocation","getCurrentPosition","position","setState","coords","latitude","longitude","fetch","then","response","json","message","removeWarning","eventKeyword","category","auth_token","process","env","REACT_APP_EVENTBRITE_API_KEY","keywordString","split","join","clearVenues","data","console","log","length","findVenueLocations","forEach","event","venue_id","id","name","text","addVenueToState","venue","prevState","newVenues","concat","addAppContents"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport EventForm from './components/Form';\nimport EventsList from './containers/EventsList';\nimport Container from 'react-bootstrap/Container';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Alert from 'react-bootstrap/Alert';\nimport MyMap from './components/MyMap';\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state={\n      events: [],\n      location: {\n        lat: 51.505,\n        long: -0.09\n      },\n      alert: null,\n      hasUserLocation: false,\n      venues: []\n    };\n    this.searchEB = this.searchEB.bind(this);\n    this.addWarning = this.addWarning.bind(this)\n  }\n\n  componentDidMount(){\n    navigator.geolocation.getCurrentPosition((position) =>{\n      this.setState({\n        location:{\n          lat: position.coords.latitude,\n          long: position.coords.longitude\n        },\n        hasUserLocation: true\n      })\n    }, () =>{\n      fetch('https://ipapi.co/json')\n        .then(response => response.json())\n        .then((location)=>{\n          this.setState({\n            location:{\n              lat: location.latitude,\n              long: location.longitude\n            },\n            hasUserLocation: true\n          })\n        })\n    })\n  }\n\n  addWarning(message) {\n    this.setState({\n      alert: (<Alert dismissible variant=\"warning\" onClose={() => this.removeWarning()}>\n        <Alert.Heading>{message}</Alert.Heading>\n      </Alert>)\n    })\n  }\n\n  removeWarning(){\n    this.setState({alert: null})\n  }\n\n  searchEB(eventKeyword, category){\n    const auth_token = process.env.REACT_APP_EVENTBRITE_API_KEY;\n    const keywordString = eventKeyword.split(\" \").join('+')\n    this.clearVenues();\n    fetch(`https://www.eventbriteapi.com/v3/events/search/?q=${keywordString}&location.latitude=${this.state.location.lat}&location.longitude=${this.state.location.long}&categories=${category}&token=${auth_token}`)\n      .then(response => response.json())\n      .then(data => {\n        console.log(data);\n        if(data.events.length === 0){\n          this.addWarning(`Eventbrite doesn't have any events that match your search.`)\n        }else{\n          this.setState({events: data.events});\n          this.findVenueLocations();\n        }\n      })\n  }\n\n  findVenueLocations(){\n    const auth_token = process.env.REACT_APP_EVENTBRITE_API_KEY;\n    if(this.state.events.length > 0){\n        this.state.events.forEach((event)=>{\n          const venue_id = event.venue_id  \n            fetch(`https://www.eventbriteapi.com/v3/venues/${venue_id}/?token=${auth_token}`)\n                .then(response => response.json())\n                .then(data => {\n                    data[\"event_id\"] = event.id;\n                    data[\"event_name\"] = event.name.text\n                    this.addVenueToState(data)\n                })\n        })\n    }\n  }\n\n  addVenueToState(venue){\n    this.setState(prevState =>{\n        console.log(prevState)\n        const newVenues = prevState.venues.concat([venue])\n        console.log(newVenues)\n        return {venues: newVenues}\n    })\n  }\n\n  clearVenues(){\n    this.setState({venues: []})\n  }\n\n  addAppContents(){\n    return(\n        <>\n          <EventForm searchEB={this.searchEB} addWarning={this.addWarning}/>\n          {this.state.alert}\n          <MyMap \n            lat={this.state.location.lat} \n            long={this.state.location.long} \n            hasUserLocation={this.state.hasUserLocation}\n            venues={this.state.venues}\n          />\n          <br />\n          <EventsList events={this.state.events} addWarning={this.addWarning}/>\n        </>\n    )\n  }\n  \n  render() {\n    return(\n      <Container>\n        <Navbar bg=\"dark\" variant=\"dark\">\n          <Navbar.Brand>Find Some Fun</Navbar.Brand>\n        </Navbar>\n        <br/>\n        {this.addAppContents()}\n        <br/>\n        <Navbar bg=\"dark\" variant=\"dark\">\n          <Navbar.Brand>© Sam Gibson 2019</Navbar.Brand>\n        </Navbar>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}